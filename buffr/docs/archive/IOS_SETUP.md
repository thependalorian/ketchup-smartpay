# iOS Development Setup Guide

**Last Updated**: 2026-01-17  
**Status**: ‚úÖ **iOS Development Ready**

---

## ‚úÖ Current iOS Status

**Environment Check**:
- ‚úÖ iOS directory exists (generated by `expo prebuild`)
- ‚úÖ Xcode installed (`/usr/bin/xcodebuild`)
- ‚úÖ iOS Simulators available (iPhone 16 Pro, iPhone 16 Pro Max, iPhone 16e)
- ‚úÖ `app.json` iOS configuration correct (`com.thependalorian.buffr`)
- ‚úÖ EAS configuration ready for iOS builds

---

## üöÄ Quick Start

### Option 1: iOS Simulator (Recommended)

```bash
# Start iOS simulator
npm run ios

# Expo will:
# 1. Install CocoaPods dependencies (if needed)
# 2. Build the app
# 3. Launch in iOS Simulator
```

### Option 2: Expo Go (Physical Device)

```bash
# Start Expo development server
npm start

# On your iPhone:
# 1. Install "Expo Go" from App Store
# 2. Scan the QR code shown in terminal
# 3. App opens in Expo Go
```

### Option 3: Development Build (EAS)

```bash
# Build development client in cloud
eas build --platform ios --profile development

# Install on device via TestFlight or direct install
```

---

## üîß iOS Development Setup

### Prerequisites

- ‚úÖ **macOS** (required for iOS development)
- ‚úÖ **Xcode** (installed from App Store)
- ‚úÖ **Xcode Command Line Tools** (usually installed with Xcode)
- ‚úÖ **CocoaPods** (installed automatically by Expo)

### Verification

```bash
# Check Xcode installation
xcodebuild -version

# Check iOS simulators
xcrun simctl list devices

# Check CocoaPods
pod --version
```

---

## üì± Running on iOS Simulator

### Start Simulator

```bash
# Method 1: Let Expo start simulator automatically
npm run ios

# Method 2: Start simulator manually, then run
open -a Simulator
npm run ios
```

### Select Simulator

If multiple simulators are available, Expo will prompt you to select one, or you can specify:

```bash
# List available simulators
xcrun simctl list devices available

# Run on specific simulator
npm run ios -- --device "iPhone 16 Pro"
```

---

## üèóÔ∏è iOS Build Configuration

### Development Build

```bash
# Build for iOS simulator
eas build --platform ios --profile development

# Build for physical device
eas build --platform ios --profile development --local
```

### Production Build

```bash
# Build for App Store
eas build --platform ios --profile production

# Submit to App Store
eas submit --platform ios --profile production
```

---

## üîç Troubleshooting

### Issue: CocoaPods UTF-8 Encoding Warning

**Error**: `WARNING: CocoaPods requires your terminal to be using UTF-8 encoding.`

**Solution**:
```bash
# Add to ~/.zshrc or ~/.bash_profile
export LC_ALL=en_US.UTF-8
export LANG=en_US.UTF-8

# Reload shell
source ~/.zshrc

# Then retry
cd ios && pod install
```

### Issue: Metro Config Loading Error

**Error**: `Error: Found config at metro.config.js that could not be loaded with Node.js`

**Solution**:
- **Status**: ‚úÖ **Fixed** - Metro config now handles optional dependencies gracefully
- The issue was `require.resolve()` calls failing for optional packages
- Config has been updated to wrap these in try-catch blocks
- If you see this error, ensure `metro.config.js` has the latest version with try-catch blocks

### Issue: Pod Install Fails

**Solutions**:

1. **Clean and Reinstall**:
   ```bash
   cd ios
   rm -rf Pods Podfile.lock
   pod install
   ```

2. **Update CocoaPods**:
   ```bash
   sudo gem install cocoapods
   pod repo update
   cd ios && pod install
   ```

3. **Use Expo Prebuild**:
   ```bash
   npx expo prebuild --clean
   ```

### Issue: Xcode Not Found

**Solution**:
```bash
# Install Xcode from App Store
# Then install command line tools
xcode-select --install
```

### Issue: Simulator Won't Start

**Solutions**:

1. **List Available Simulators**:
   ```bash
   xcrun simctl list devices
   ```

2. **Boot Simulator**:
   ```bash
   xcrun simctl boot "iPhone 16 Pro"
   ```

3. **Open Simulator App**:
   ```bash
   open -a Simulator
   ```

### Issue: Build Fails

**Solutions**:

1. **Clean Build**:
   ```bash
   cd ios
   xcodebuild clean
   rm -rf build
   cd .. && npm run ios
   ```

2. **Reset Metro Cache**:
   ```bash
   npm start -- --clear
   ```

3. **Reinstall Pods**:
   ```bash
   cd ios
   pod deintegrate
   pod install
   ```

---

## ‚úÖ iOS Development Checklist

Before developing:

- [ ] Xcode installed and updated
- [ ] iOS directory exists (run `npx expo prebuild` if missing)
- [ ] CocoaPods dependencies installed (`cd ios && pod install`)
- [ ] iOS Simulator available
- [ ] `app.json` iOS configuration correct
- [ ] EAS account configured (for cloud builds)

---

## üìö Additional Resources

- **Expo iOS Setup**: https://docs.expo.dev/workflow/ios-simulator/
- **Xcode Installation**: https://developer.apple.com/xcode/
- **EAS Build iOS**: https://docs.expo.dev/build/introduction/
- **Expo Go**: https://expo.dev/client

---

## üéØ Development Workflow

### Daily Development

```bash
# Start development server
npm start

# In another terminal, run on iOS simulator
npm run ios
```

### Testing on Physical Device

```bash
# Start development server
npm start

# Scan QR code with Expo Go app on iPhone
# Or use development build installed on device
```

### Production Builds

```bash
# Build in cloud (no local Xcode needed for build)
eas build --platform ios --profile production

# Submit to App Store
eas submit --platform ios --profile production
```

---

**Status**: ‚úÖ **iOS Development Ready** - All configurations correct, ready for iOS development!
